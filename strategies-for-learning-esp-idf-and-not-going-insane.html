<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>6 Strategies for Learning ESP-IDF (without going insane) - Captain Embedded üë®üèª‚Äç‚úàÔ∏è‚öì</title><meta name="description" content="If you try to write firmware for ESP32 microcontroller, you will have two popular choices: Arduino is easier. And you&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><script defer="defer" type="text/javascript" data-domain="rosmianto.com" src="/media/files/script.outbound-links.js"></script><script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script><link rel="stylesheet" href="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-gray.css"><link rel="stylesheet" href="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://rosmianto.com/strategies-for-learning-esp-idf-and-not-going-insane.html"><link rel="alternate" type="application/atom+xml" href="https://rosmianto.com/feed.xml"><link rel="alternate" type="application/json" href="https://rosmianto.com/feed.json"><meta property="og:title" content="6 Strategies for Learning ESP-IDF (without going insane)"><meta property="og:image" content="https://rosmianto.com/media/posts/24/kevin-ku-w7ZyuGYNpRQ-unsplash.jpg"><meta property="og:image:width" content="3353"><meta property="og:image:height" content="2514"><meta property="og:site_name" content="Captain Embedded üë®üèª‚Äç‚úàÔ∏è‚öì"><meta property="og:description" content="If you try to write firmware for ESP32 microcontroller, you will have two popular choices: Arduino is easier. And you&hellip;"><meta property="og:url" content="https://rosmianto.com/strategies-for-learning-esp-idf-and-not-going-insane.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://rosmianto.com/assets/css/style.css?v=7aa8cd9652c0014cd6c5dae831db723f"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://rosmianto.com/strategies-for-learning-esp-idf-and-not-going-insane.html"},"headline":"6 Strategies for Learning ESP-IDF (without going insane)","datePublished":"2024-06-22T18:51+07:00","dateModified":"2024-06-24T12:06+07:00","image":{"@type":"ImageObject","url":"https://rosmianto.com/media/posts/24/kevin-ku-w7ZyuGYNpRQ-unsplash.jpg","height":2514,"width":3353},"description":"If you try to write firmware for ESP32 microcontroller, you will have two popular choices: Arduino is easier. And you&hellip;","author":{"@type":"Person","name":"Rosmianto A. Saputro","url":"https://rosmianto.com/authors/rosmianto-a-saputro/"},"publisher":{"@type":"Organization","name":"Rosmianto A. Saputro"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="lines"><div class="container lines lines--right"><header class="header"><a href="https://rosmianto.com/" class="logo">Captain Embedded üë®üèª‚Äç‚úàÔ∏è‚öì</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu">Menu</button><ul class="navbar__menu"><li><a href="https://rosmianto.com/authors/rosmianto-a-saputro/" target="_self">Articles</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Products (NEW üî•)</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://fwguide.rosmianto.com" target="_blank">Firmware Development Guide</a></li></ul></li><li><a href="https://newsletter.rosmianto.com" target="_blank">Newsletter</a></li><li><a href="https://www.linkedin.com/in/rosmianto/" target="_blank">LinkedIn</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__inner post__header"><h1 class="post__title">6 Strategies for Learning ESP-IDF (without going insane)</h1><div class="post__meta"><div class="post__meta__left"><a href="https://rosmianto.com/authors/rosmianto-a-saputro/" class="invert post__author" rel="author" title="Rosmianto A. Saputro"><img src="https://rosmianto.com/media/website/Untitled-Diagram.jpg" loading="eager" height="1700" width="1700" alt="Rosmianto A. Saputro"> Rosmianto A. Saputro</a></div><div class="post__meta__right"><time datetime="2024-06-22T18:51" class="post__date">June 22, 2024</time><div class="post__updated">Updated on <time datetime="2024-06-22T18:51" class="post__date">June 24, 2024</time></div></div></div></header><figure class="post__featured-image"><div class="post__featured-image__inner is-img-loading"><img src="https://rosmianto.com/media/posts/24/kevin-ku-w7ZyuGYNpRQ-unsplash.jpg" srcset="https://rosmianto.com/media/posts/24/responsive/kevin-ku-w7ZyuGYNpRQ-unsplash-xs.jpg 384w, https://rosmianto.com/media/posts/24/responsive/kevin-ku-w7ZyuGYNpRQ-unsplash-sm.jpg 600w, https://rosmianto.com/media/posts/24/responsive/kevin-ku-w7ZyuGYNpRQ-unsplash-md.jpg 768w, https://rosmianto.com/media/posts/24/responsive/kevin-ku-w7ZyuGYNpRQ-unsplash-lg.jpg 1200w, https://rosmianto.com/media/posts/24/responsive/kevin-ku-w7ZyuGYNpRQ-unsplash-xl.jpg 1600w" sizes="(min-width: 37.5em) 1600px, 80vw" loading="eager" height="2514" width="3353" alt=""></div><figcaption>Photo by Kevin Ku on Unsplash</figcaption></figure><div class="post__inner"><div class="post__entry"><p>If you try to write firmware for ESP32 microcontroller, you will have two popular choices:</p><ol><li>Arduino framework</li><li>ESP-IDF</li></ol><p>Arduino is easier. And you probably have good experience with AVR-based Arduino boards (like UNO, Nano, Mega2560, etc.), so writing firmware for ESP32 using Arduino is seamless.</p><p>You already know the basics.</p><p>But because Arduino framework is designed to be simple, lots of concepts are hidden from you. When you work with a slightly more complex project, you will quickly realize that Arduino won't cut it.</p><p>For example, let's say you want to build a BLE scanner using ESP32.</p><p>The goal is simple: to scan nearby BLE devices as fast as possible, if the scanning process is too slow, you will miss some BLE devices. It's often required if you want to track BLE device movements.</p><p>Now, you can scan BLE devices using Arduino framework, yes. But it will be noticeably slower. So, there's no other choice: use ESP-IDF for better performance.</p><p>However, using ESP-IDF is not without downsides. Just take a look at this code comparison below:</p><figure><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/24//Konthen.drawio.png" alt="" width="1000" height="664" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://rosmianto.com/media/posts/24//responsive/Konthen.drawio-xs.png 384w, https://rosmianto.com/media/posts/24//responsive/Konthen.drawio-sm.png 600w, https://rosmianto.com/media/posts/24//responsive/Konthen.drawio-md.png 768w, https://rosmianto.com/media/posts/24//responsive/Konthen.drawio-lg.png 1200w, https://rosmianto.com/media/posts/24//responsive/Konthen.drawio-xl.png 1600w"></figure><figcaption>Left: Arduino code. Right: ESP-IDF example code for ADC</figcaption></figure><p>Both essentially do the same thing: sample analog signal, and printout the value.</p><p>But the right side is hard to follow, especially if you're not familiar with ESP-IDF. There are too many things to unpack here:</p><ul><li>Okay I know ADC. But what's that <em>oneshot</em> thing?</li><li>What ESP_ERROR_CHECK will do?</li><li>Why ADC needs calibration?</li><li>Wait, there are TWO ADCs inside ESP32?</li><li>Why there's so many #include?</li><li>Why it's called vTaskDelay() and not just delay()?</li></ul><p>You see, there are many concepts hidden in Arduino framework. No wonder people said they struggle to learn ESP-IDF.</p><p>So, I will share with you my 6 strategies (plus 1 bonus strategy) to learn ESP-IDF without going insane.</p><h1>Strategy #1: Hone Your C Skill, Especially Function Pointer and Callback</h1><p>ESP-IDF is written in C. It's actually a good thing because as a framework, it should ensure interoperability with many other languages. C is the lowest common denominator for embedded programming.</p><p>ESP-IDF can be sometimes heavy on OOP concepts, and because it's written in C, the framework uses lots of function pointers and callback and pass-by-reference to mimic C++ OOP.</p><p>You can be confused if you don't understand the basics of function pointer and callback in C.</p><h1>Strategy #2: Think in Subsystem, not Linear Thinking</h1><p>I'm sorry for saying jargon.</p><p>Basically by thinking in subsystem, you focus your attention on different parts of the system and how all those parts interact and influence each other.</p><p>Linear thinking is when you think step-by-step, like BASIC or Assembly programming. It's procedural thinking.</p><p>ESP-IDF can sometimes be heavy on event-driven as well. So System thinking will be extremely helpful for you. Now let me give you an example.</p><p>Let's check the ESP-IDF example code for WiFi:</p><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/24/Screenshot-2024-06-23-at-15.33.43.png" alt="" width="1000" height="465" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.33.43-xs.png 384w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.33.43-sm.png 600w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.33.43-md.png 768w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.33.43-lg.png 1200w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.33.43-xl.png 1600w"></figure><p>it's just a code to initialize the ESP32 WiFi to act as an Access Point.</p><p>Notice that ugly <code>esp_event_handler_instance_register</code> function?</p><p>It's responsible for adding event handling to the API. Whenever the WiFi state changes (like something connected, or disconnected), the function <code>wifi_event_handler</code> (the callback function) will be called later. And here is the function implementation:</p><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/24/Screenshot-2024-06-23-at-15.37.35.png" alt="" width="1000" height="352" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.37.35-xs.png 384w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.37.35-sm.png 600w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.37.35-md.png 768w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.37.35-lg.png 1200w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-23-at-15.37.35-xl.png 1600w"></figure><p>Don't worry about those alien macros and structs yet.</p><p>Now, the question is. When exactly this function will be executed? Like how many seconds after bootup?</p><p>The answer is we don't know. It's the nature of event-driven programming. The function will only be executed only if the WiFi state is changed.</p><p>That's why we can't rely on <strong>l</strong><strong>inear thinking</strong>, because we would be confused as hell. With <strong>system</strong> <strong>thinking</strong>, we will understand that the WiFi event will interact with our <code>wifi_event_handler</code> function <em>later</em>.</p><p>ESP-IDF has an insanely large amount of event-driven programming, especially if you work with WiFi and Bluetooth.</p><p>So, force yourself really hard in system thinking, not procedural/linear thinking.</p><h1>Strategy #3: Use VSCode 'Goto Definition' Feature</h1><p>ESP-IDF encapsulates many data formats and structures inside <code>struct</code>, and sometimes we want to know the full structure of the datatype. Look at this GPIO example code:</p><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/24/Screenshot-2024-06-24-at-11.22.20.png" alt="" width="476" height="314" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.22.20-xs.png 384w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.22.20-sm.png 600w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.22.20-md.png 768w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.22.20-lg.png 1200w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.22.20-xl.png 1600w"></figure><p>If I want to know the exact structure of <code>gpio_config_t</code>, I could look it up from the documentation, but that's tedious!</p><p>Instead, I just right-click it and select 'Goto Definition'. It's enough for me to understand the data structure. But if I want more explanation, then I'll go to the official docs.</p><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/24/Screenshot-2024-06-24-at-11.24.22.png" alt="" width="423" height="397" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.24.22-xs.png 384w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.24.22-sm.png 600w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.24.22-md.png 768w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.24.22-lg.png 1200w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.24.22-xl.png 1600w"></figure><p>That way, I'll understand the API context much easier and faster.</p><h1>Strategy #4: Go back to the theory!</h1><p>I'll admit, the reason why ESP-IDF seems hard to learn is because <em>it's actually more complex</em>. And by more complex, I mean the framework doesn't hide many details in the code (unlike Arduino framework).</p><p>Even if we open the example code, it still feels overwhelming.</p><p>Remember, ESP-IDF provides¬†<em><strong>example</strong> </em><strong>projects</strong>, not¬†<em><strong>tutorials</strong></em><em>.¬†</em>Mind the difference!</p><p>The goal is to provide as many details as possible, covering many use cases. Not being tutorials, ESP-IDF expects you to be familiar with lots of terms before.</p><p>For example, just open the example code for BLE. It's complex:</p><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/24/Screenshot-2024-06-24-at-11.39.17.png" alt="" width="643" height="326" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.39.17-xs.png 384w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.39.17-sm.png 600w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.39.17-md.png 768w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.39.17-lg.png 1200w, https://rosmianto.com/media/posts/24/responsive/Screenshot-2024-06-24-at-11.39.17-xl.png 1600w"></figure><p>What you see above is the parameter for <em>BLE payload advertisement</em>.</p><p>Confused with BLE advertisement? Why would the BLE device advertise something?</p><p>You won't understand the code if you don't understand the theory behind BLE standard. There are tons of terms and jargon, so you need to be familiar with:</p><ul><li>BLE advertisements</li><li>BLE scanning</li><li>GATT profile</li><li>BLE Services</li><li>BLE architecture</li><li>BLE software stack (nimble vs. Bluedroid)</li><li>etc.</li></ul><p>If you work with ADC, then you need to understand first:</p><ul><li>Different types of ADC (SAR, Sigma-Delta, Dual-slope ADC, etc.)</li><li>Bit-width</li><li>Sampling rate</li><li>Sampling mode (continuous vs. oneshot)</li><li>ADC resolution and accuracy</li><li>Quantization</li><li>Reference Voltage</li><li>Calibration and compensation (temperature etc.)</li></ul><p>If you never heard most of the concepts above, no wonder you will struggle to understand ESP-IDF because it assumes you're already familiar with them.</p><p>So, go back to your textbooks and reference manuals from major semiconductor vendors.</p><h1>Strategy #5: Don't Create Project from Scratch, Copy from Example Code Instead</h1><p>Building firmware is hard enough, so don't torture yourself by creating projects from scratch.</p><p>Use example code. Pick one that's closest to your needs. For example, if you want to create firmware to interface I2C EEPROM, don't write from zero. ESP-IDF already provides that.</p><p>Use it.</p><p>ESP-IDF license should be good for you to copy their code (It's not legal advice though).</p><h1>Strategy #6: Read ESP-IDF docs over and over again</h1><p>This is the most obvious tip.</p><p>You need to read the documentation over and over again.</p><p>Because first read you won't understand a thing.</p><p>But second read you will pick up some more details.</p><p>The third read you will understand the context and the nuance.</p><p>The fourth read you're already familiar where to look for extra details.</p><p>The fifth read you will become more and more comfortable with the ESP-IDF inside out.</p><p><em><strong>But that requires time!</strong></em></p><p>Duh? In which world learning doesn't require time?</p><h1>Bonus Strategy: Learn FreeRTOS concepts</h1><p>This is probably an underrated strategy.</p><p>You should understand that ESP-IDF uses FreeRTOS APIs almost all the time.</p><p>So, you need to also familiar with FreeRTOS concepts to understand ESP-IDF code.</p><ul><li>Task management (creation, delete, suspend, resume)</li><li>Queue</li><li>Semaphore</li><li>Mutex</li><li>Event Group</li><li>Notification</li><li>etc.</li></ul><p>Good luck with learning ESP-IDF!</p><p>¬†</p><p class="msg msg--info" data-slate-node="element">Whenever you're ready, there are 2 ways I can help you:<br><br>1. <a href="https://freelancer.rosmianto.com/">Becoming Embedded Freelancer Book</a>. Learn how to earn more money (even more than your main job) working on freelance projects using a proven path explained from an embedded engineer's point-of-view.<br><br>2. <a href="https://fwguide.rosmianto.com/">Firmware Development Workflow Guide</a>. Upgrade your workflow to achieve efficient development, consistent code quality, robust firmware, and skyrocketed your productivity as an embedded engineer.</p></div><footer class="post__footer"><div class="post__tag-share"><div class="post__tag"><h3 class="post__tag__title">Posted in</h3><ul class="post__tag__list"><li><a href="https://rosmianto.com/tags/embedded-tips/">Embedded Tips</a></li></ul></div><div class="post__share"></div></div></footer></div></article><div class="post__related"><h3 class="post__related__title">Related posts</h3><div class="l-grid l-grid--2"><article class="c-card"><div class="c-card__wrapper"><div class="c-card__content"><header><h2 class="c-card__title"><a href="https://rosmianto.com/the-reality-of-learning-embedded.html" class="invert">The Reality of Learning Embedded</a></h2></header><footer class="c-card__meta"><a href="https://rosmianto.com/tags/embedded-career/" class="c-card__tag">Embedded Career</a></footer></div></div></article></div></div></main><footer class="footer"><div class="footer__left"><div class="footer__copy">Powered by Publii</div></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://rosmianto.com/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = { mobileMenuMode: 'sidebar', animationSpeed: 300, submenuWidth: 'auto', doubleClickTime: 500, mobileMenuExpandableSubmenus: true, relatedContainerForOverlayMenuSelector: '.navbar', };</script><script defer="defer" src="https://rosmianto.com/assets/js/scripts.min.js?v=6450cfc483efd7e58ed8ad5b64050d3e"></script><script>function publiiDetectLoadedImages () {
         var images = document.querySelectorAll('img[loading]:not(.is-loaded)');
         for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
               images[i].classList.add('is-loaded');
               images[i].parentNode.classList.remove('is-img-loading');
            } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
                  this.parentNode.classList.remove('is-img-loading');
               }, false);
            }
         }
      }
      publiiDetectLoadedImages();</script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script></body></html>