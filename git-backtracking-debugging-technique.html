<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Git Backtracking Debugging Technique - Captain Embedded ğŸ‘¨ğŸ»â€âœˆï¸âš“</title><meta name="description" content="There are 2 great advices when you're doing firmware development: Commits are free so you should use it whenever possible. Those advices will make your life easy when it comes to tracking code changes. Because in the entire firmware development, you will make hundreds of&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><script defer="defer" type="text/javascript" data-domain="rosmianto.com" src="https://plausible.io/js/plausible.js"></script><script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script><link rel="stylesheet" href="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-gray.css"><link rel="stylesheet" href="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://rosmianto.com/git-backtracking-debugging-technique.html"><link rel="alternate" type="application/atom+xml" href="https://rosmianto.com/feed.xml"><link rel="alternate" type="application/json" href="https://rosmianto.com/feed.json"><meta property="og:title" content="Git Backtracking Debugging Technique"><meta property="og:site_name" content="Captain Embedded ğŸ‘¨ğŸ»â€âœˆï¸âš“"><meta property="og:description" content="There are 2 great advices when you're doing firmware development: Commits are free so you should use it whenever possible. Those advices will make your life easy when it comes to tracking code changes. Because in the entire firmware development, you will make hundreds of&hellip;"><meta property="og:url" content="https://rosmianto.com/git-backtracking-debugging-technique.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://rosmianto.com/assets/css/style.css?v=4973c5003c8962017038e0fabea4774f"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://rosmianto.com/git-backtracking-debugging-technique.html"},"headline":"Git Backtracking Debugging Technique","datePublished":"2024-03-18T10:08","dateModified":"2024-03-18T19:23","description":"There are 2 great advices when you're doing firmware development: Commits are free so you should use it whenever possible. Those advices will make your life easy when it comes to tracking code changes. Because in the entire firmware development, you will make hundreds of&hellip;","author":{"@type":"Person","name":"Rosmianto A. Saputro","url":"https://rosmianto.com/authors/rosmianto-a-saputro/"},"publisher":{"@type":"Organization","name":"Rosmianto A. Saputro"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://rosmianto.com/">Captain Embedded ğŸ‘¨ğŸ»â€âœˆï¸âš“</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://rosmianto.com/authors/rosmianto-a-saputro/" target="_self">Articles</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Products (NEW ğŸ”¥)</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://fwguide.rosmianto.com" target="_blank">Firmware Development Guide</a></li></ul></li><li><a href="https://newsletter.rosmianto.com" target="_blank">Newsletter</a></li><li><a href="https://www.linkedin.com/in/rosmianto/" target="_blank">LinkedIn</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://rosmianto.com/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2024-03-18T10:08">March 18, 2024</time></div><h1>Git Backtracking Debugging Technique</h1><div class="post__meta post__meta--author"><img src="https://rosmianto.com/media/website/Untitled-Diagram.jpg" loading="eager" height="1700" width="1700" class="post__author-thumb" alt="Rosmianto A. Saputro"> <a href="https://rosmianto.com/authors/rosmianto-a-saputro/" class="feed__author">Rosmianto A. Saputro</a></div></div></header></div><div class="wrapper post__entry"><p>There are 2 great advices when you're doing firmware development:</p><ol><li>Use git and GitHub</li><li>Make commits as small as practically possible</li></ol><p>Commits are free so you should use it whenever possible. Those advices will make your life easy when it comes to tracking code changes.</p><h1>Why Should I Track My Code?</h1><p>Because in the entire firmware development, you will make hundreds of not thosands changes to the code. You will introduce new features, testing out a new architecture, refactoring some code smells here and there, paying technical debts, and hundreds other things you might do to the code.</p><p>But because we're human, we can make errors.</p><p>From minor typos, to revenue-affecting critical bugs. At some points in our embedded career, we will make mistakes, even senior engineers still can make mistakes. And we often backup our work to prevent something wrong happen. We want to make sure we can restore chaos when something terrible happened. In other word, we backup as an assurance.</p><p>Code tracking is a form of backup.</p><p>It offers unlimited and easy way to backup every step we made. And this article will explain to you how to effectively use git to help your debugging activity.</p><p class="msg msg--info">In April 6th 2021, a university researcher submitted a patch to Linux kernel maintainers. The maintainers accepted the patch and merged to the kernel code.<br><br><a href="https://www.theverge.com/2021/4/30/22410164/linux-kernel-university-of-minnesota-banned-open-source" target="_blank" rel="noopener noreferrer">It turned out that the researcher has injected malicious code to the patch as a study for his university research</a>. Treating Linux kernel community as his lab guinea pig.<br><br>Maintainers are not happy with this, and instantly ripped out his code from the kernel.<br><br>Without using code tracking (in this case, git), the maintainers will have tedious day to check one by one the malicious code, and delete them line by line.<br><br>Another example that using git will make your life easier in many situation.<br><br>The researcher and the entire university has been banned from submitting future patch. Very sad.</p><h1>How to Pinpoint The Bug with Git</h1><p>Let's say you have a project with commits like this:</p><figure><figure class="post__image post__image--center"><img loading="lazy" src="https://rosmianto.com/media/posts/12/git-history-2.png" alt="" width="500" height="205" sizes="100vw" srcset="https://rosmianto.com/media/posts/12/responsive/git-history-2-xs.png 300w, https://rosmianto.com/media/posts/12/responsive/git-history-2-sm.png 480w, https://rosmianto.com/media/posts/12/responsive/git-history-2-md.png 768w, https://rosmianto.com/media/posts/12/responsive/git-history-2-lg.png 1024w, https://rosmianto.com/media/posts/12/responsive/git-history-2-xl.png 1360w, https://rosmianto.com/media/posts/12/responsive/git-history-2-2xl.png 1600w"></figure><figcaption>Each circle represents your commit. You have 5 days worth of commits</figcaption></figure><p>On April 5, you make a commit and test the code. Suddenly, a wild bug appear and make the whole system crashes. You reset the device, still crashes.</p><p>You're confused because you just add a minor feature. It shouldn't crash.</p><p>In this situation, you decided to revert back to commit Apr 4:</p><p><code>git checkout commit-apr4-hash</code></p><p>You rebuild the project and pufff, the bug is gone!</p><p>At this point, you can reasonably assume that commit-apr5 is causing problem.</p><h1>Find the Root Cause</h1><p>Use git diff to find code changes that caused the issue:</p><p><code>git diff commit-apr5-hash commit-apr4-hash</code></p><p>You might find some silly like <a href="https://en.wikipedia.org/wiki/Off-by-one_error" target="_blank" rel="noopener noreferrer">off-by-one error</a>, <a href="https://encyclopedia.kaspersky.com/glossary/use-after-free/" target="_blank" rel="noopener noreferrer">use-after-free error.</a> Or maybe you will find something more serious like race condition, deadlock, starving tasks. Now it's your job to figure out how to solve it.</p><p>You might ask, what if the git diff result is too big, like 1000 lines too big?</p><p>Well, glad you asked. That's why in the first paragraph I said to make git commits as small as humanly possible. This will prevent your git diff become a mammoth.</p><p>What if you already made a big diff? Well, good luck finding the root cause haha ğŸ˜Â </p><p>Â </p><p>Â </p><p>Â </p><br><p class="msg msg--info">Whenever you're ready, there are 2 ways I can help you:<br><br>1. <a href="https://fwguide.rosmianto.com?utm_source=rosmianto.com&utm_medium=post" target="_blank" rel="noopener noreferrer">Professional Firmware Development Guide</a>. If you're looking to build professional-grade firmware, I share 6+ years of expertise developing firmware. This guide shows you the exact workflow I use to build high-quality firmware for my company and my freelance clients.<br><br>2. Join other 2400+ engineers by subscribing <a href="https://newsletter.rosmianto.com" target="_blank" rel="noopener noreferrer">my newsletter</a>.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on March 18, 2024</p><div class="post__share"></div><div class="post__bio bio"><img src="https://rosmianto.com/media/website/Untitled-Diagram.jpg" loading="lazy" height="1700" width="1700" class="bio__avatar" alt="Rosmianto A. Saputro"><div><h3 class="bio__name"><a href="https://rosmianto.com/authors/rosmianto-a-saputro/" rel="author">Rosmianto A. Saputro</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://rosmianto.com/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://rosmianto.com/how-to-do-freelancing-as-an-embedded-engineer.html" class="post__nav-link" rel="prev"><span>Previous</span> How to Do Freelancing As an Embedded Engineer</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>Â© 2024 Rosmianto</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://rosmianto.com/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://rosmianto.com/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://rosmianto.com/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script></body></html>